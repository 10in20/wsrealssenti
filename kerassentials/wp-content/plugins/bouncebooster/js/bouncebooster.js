var BounceBooster={debug:false,ref:"",token:"#bb1958161029033363",tokens:{},options:{},rules:[{id:"google",condition:function(){return/www\.google\./i.test(BounceBooster.ref)}},{id:"yahoo",condition:function(){return/search\.yahoo\.com/i.test(BounceBooster.ref)}},{id:"bing",condition:function(){return/www\.bing\.com/i.test(BounceBooster.ref)}},{id:"facebook",condition:function(){return/facebook\.com/i.test(BounceBooster.ref)}},{id:"twitter",condition:function(){return/t\.co/i.test(BounceBooster.ref)}},{id:"google_plus",condition:function(){return/plus\.url\.google\.com/i.test(BounceBooster.ref)}},{id:"youtube",condition:function(){return/youtube\.com/i.test(BounceBooster.ref)}},{id:"tumblr",condition:function(){return/tumblr\.com/i.test(BounceBooster.ref)}},{id:"instagram",condition:function(){return/instagram\.com/i.test(BounceBooster.ref)}},{id:"default",condition:function(){var b="bounce_mode" in BounceBooster.options?BounceBooster.options.bounce_mode:"once";if(BounceBooster.ref.length>0&&b=="once"){var a=new RegExp("^"+location.protocol+"//"+location.host,"i");return !a.test(BounceBooster.ref)}return true}}],hook:function(){history.replaceState(null,null,location.pathname+location.search+BounceBooster.token);history.pushState(null,null,location.pathname+location.search)},triggerAuto:function(){if(BounceBooster.debug){console.log("Trigger: auto")}BounceBooster.hook()},triggerSmart:function(){if(BounceBooster.debug){console.log("Trigger: smart")}if(BounceBooster.isChrome75OrLater()||BounceBooster.isOpera()){BounceBooster.triggerUser()}else{BounceBooster.triggerAuto()}},triggerUser:function(){if(BounceBooster.debug){console.log("Trigger: user")}var a=false;function c(){if(BounceBooster.debug){console.log("Trigger: user1")}window.removeEventListener("touchstart",c,false);if(!a){a=true;BounceBooster.hook()}}window.addEventListener("touchstart",c,false);function b(){if(BounceBooster.debug){console.log("Trigger: user2")}document.removeEventListener("mousedown",b,false);if(!a){a=true;BounceBooster.hook()}}document.addEventListener("mousedown",b,false)},init:function(c){BounceBooster.options=c;BounceBooster.findReferrer();BounceBooster.buildTokens();if(BounceBooster.debug){console.log("DEBUG")}var f=true;if("bounce_percent" in c){var d=parseInt(c.bounce_percent);if(!isNaN(d)&&d<100&&d>0){if(BounceBooster.getRandomInt(0,d)>d){f=false}}}if(window.history&&window.history.pushState&&f){if(BounceBooster.debug){console.log("Running")}if("rules" in c){for(var a in c.rules){BounceBooster.rules.unshift({id:a,condition:function(){var h=new RegExp("^"+c.rules[a],"i");return h.test(BounceBooster.ref)}})}}var e=BounceBooster.findRule();if(BounceBooster.debug){console.log("Rule",e)}if(e!==false){if(c["url_"+e]||c.url_default){var g="bounce_mode" in c?c.bounce_mode:"once";if(window.sessionStorage.getItem("bbdone")==null||g=="burst"){window.sessionStorage.setItem("bbdone",true);if(BounceBooster.debug){console.log("Done",false)}if(BounceBooster.debug){console.log("Token",BounceBooster.token)}var b="bounce_trigger" in c?c.bounce_trigger:"auto";if(b=="auto"){BounceBooster.triggerAuto()}else{if(b=="smart"){BounceBooster.triggerSmart()}else{BounceBooster.triggerUser()}}}else{if(BounceBooster.debug){console.log("Done",true)}}setTimeout(function(){window.addEventListener("popstate",function(j){if(BounceBooster.debug){console.log("Poped")}if(location.hash==BounceBooster.token){if(BounceBooster.debug){console.log("Token matches")}var i=[];if(c["url_"+e]){i=c["url_"+e]}else{if(c.url_default){i=c.url_default}}if(g=="once"){window.sessionStorage.removeItem("bbdone")}if(typeof i==="function"){i()}else{if(i.length>0){history.replaceState(null,null,location.pathname+location.search);var h=BounceBooster.shuffleArray(i).pop();if("type" in c&&c.type=="developer"){h=BounceBooster.parseTokensRaw(h);h=BounceBooster.parseTokens(h)}location.replace(h)}}}},false)},1000)}}}},buildTokens:function(){var a=document.createElement("a");a.href=document.referrer||"";BounceBooster.tokens={"[url]":location.href,"[path]":location.pathname,"[path_tokenized]":BounceBooster.tokenizePath(location.pathname),"[query]":location.search,"[domain]":location.host,"[domain_tokenized]":BounceBooster.tokenizeDomain(location.host),"[domain_normalized]":BounceBooster.normalizeDomain(location.host),"[title]":document.title,"[referrer]":document.referrer||"","[referrer_domain]":a?a.host:"","[referrer_domain_tokenized]":BounceBooster.tokenizeDomain(a.host),"[referrer_domain_normalized]":BounceBooster.normalizeDomain(a.host),"[url_raw]":location.href,"[path_raw]":location.pathname,"[path_tokenized_raw]":BounceBooster.tokenizePath(location.pathname),"[query_raw]":location.search,"[domain_raw]":location.host,"[domain_tokenized_raw]":BounceBooster.tokenizeDomain(location.host),"[domain_normalized_raw]":BounceBooster.normalizeDomain(location.host),"[title_raw]":document.title,"[referrer_raw]":document.referrer||"","[referrer_domain_raw]":a?a.host:"","[referrer_domain_tokenized_raw]":BounceBooster.tokenizeDomain(a.host),"[referrer_domain_normalized_raw]":BounceBooster.normalizeDomain(a.host)}},tokenizePath:function(a){return a.replace(/\-/g," ").replace(/\./g," ").replace(/\//g," ").replace(/^\s+|\s+$/g,"")},normalizeDomain:function(a){return a.replace(/^www\./,"")},tokenizeDomain:function(b){b=b.replace(/^www\./,"");var a=b.lastIndexOf(".");if(a!=-1){b=b.substring(0,a)}return b.replace(/\-/g," ").replace(/\./g," ")},parseTokens:function(a){return a.replace(/\[(.*?)\]/g,function(b){return b in BounceBooster.tokens?encodeURIComponent(BounceBooster.tokens[b]):b})},parseTokensRaw:function(a){return a.replace(/\[(.*?)_raw\]/g,function(b){return b in BounceBooster.tokens?BounceBooster.tokens[b]:b})},shuffleArray:function(b){var e,c,d=b.length;while(d){c=~~(Math.random()*d);e=b[--d];b[d]=b[c];b[c]=e}return b},isOpera:function(){return navigator.userAgent.indexOf("OPR/")!=-1},isChrome75OrLater:function(){var a=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return a?parseInt(a[2],10)>=75:false},getRandomInt:function(b,a){return b+Math.floor(Math.random()*(a-b+1))},findRule:function(){for(var a=0;a<BounceBooster.rules.length;a++){if(BounceBooster.rules[a].condition()){return BounceBooster.rules[a].id}}return false},findReferrer:function(){var e={},b=0,c=location.hash.substring(1).split("&");for(var a=0;a<c.length;a++){var d=c[a].split("=");e[d[0]]=d[1];b++}if(b==0||!e.ref){BounceBooster.ref=document.referrer||""}else{BounceBooster.debug=true;BounceBooster.ref=e.ref}if(location.hash=="#debug"){BounceBooster.debug=true}}};if(!/(bot|crawl|spider)/i.test(navigator.userAgent||navigator.vendor||window.opera)){if(window.bouncebooster){if("async" in window.bouncebooster){!function(a,b){this[a]=b()}("bouncebooster_init",function(i){var n=[],h,g=false,j=document,b=j.documentElement,m=b.doScroll,a="DOMContentLoaded",c="addEventListener",l="onreadystatechange",e="readyState",o=m?/^loaded|^c/:/^loaded|c/,d=o.test(j[e]);function k(p){d=1;while(p=n.shift()){p()}}j[c]&&j[c](a,h=function(){j.removeEventListener(a,h,g);k()},g);m&&j.attachEvent(l,h=function(){if(/^c/.test(j[e])){j.detachEvent(l,h);k()}});return(i=m?function(f){self!=top?d?f():n.push(f):function(){try{b.doScroll("left")}catch(p){return setTimeout(function(){i(f)},50)}f()}()}:function(f){d?f():n.push(f)})});bouncebooster_init(function(){window.BounceBooster.init(window.bouncebooster)})}else{BounceBooster.init(window.bouncebooster)}}};